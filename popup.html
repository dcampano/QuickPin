<script src="jquery-1.7.1.min.js" type="text/javascript"></script>
<style>
body {
  min-width:357px;
  overflow-x:hidden;
}

img {
}
</style>
<div id="content"></div>

<script>

chrome.tabs.query( { "pinned": true }, function(tabs) { 
	console.log(tabs);
	for(var i = 0; i < tabs.length; i++) {
		var tab = tabs[i];
		var div = $('<div>');
		var img = $('<img>');
		img.attr("src", tab.favIconUrl);
		div.append(img);
		var titleAssist = cleanTitle(tab);
		div.append("&nbsp;" + titleAssist);
		div.attr("data-tab-id", tab.id);
		div.click(function() {
			var tabId = $(this).attr("data-tab-id");
			chrome.tabs.update(parseInt(tabId), { "active": true });
		});
		$("#content").append(div);
	}

});

var cleanedTitles = [
	{ title: 'Gmail', search: 'mail.google.com' },
	{ title: 'Google Reader', search: 'google.com/reader' }
];
function cleanTitle(tab){
	for(var i = 0; i < cleanedTitles.length; i++){
		var cleanTitle = cleanedTitles[i];
		if(tab.url.indexOf(cleanTitle.search, 0) != -1){
			return cleanTitle.title;
		}
	}
	return tab.title;
}

</script>
